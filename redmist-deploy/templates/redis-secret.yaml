{{- if index .Values "redis-operator" "enabled" }}
{{- if .Values.redis.auth }}
# Redis Operator requires a secret with a 'password' field
# This will be created from the existing rmkeys secret's 'redis' field
# Run this before deployment:
# kubectl create secret generic redis-auth -n {{ .Release.Namespace }} --from-literal=password="$(kubectl get secret rmkeys -n {{ .Release.Namespace }} -o jsonpath='{.data.redis}' | base64 -d)"
{{- end }}
{{- end }}
