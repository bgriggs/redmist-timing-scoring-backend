global:
  env:
    "ASPNETCORE_ENVIRONMENT": "Production"
    "ASPNETCORE_FORWARDEDHEADERS_ENABLED": "true"
    "ASPNETCORE_URLS": "http://+:8080"
    "REDIS_SVC": "redis-master:6379"
    "Keycloak__Realm": "redmist"
    "Keycloak__AuthServerUrl": "https://auth.redmist.racing"
    "SentinelApiUrl": "https://svs-api.sentinel.racing/api/"
    "Server__ExtTelemUrl": "https://api.redmist.racing/status/v1/ExternalTelemetry"
    "Assets__StorageZoneName": "redmist-assets"
    "Assets__MainReplicationRegion": "de"
    "Assets__CdnId": "5008374"
    "Archive__StorageZoneName": "redmist-archive"
    "Archive__MainReplicationRegion": "ny"
    "Archive__CdnId": "5058723"

  secrets:
    - env: "REDIS_PW"
      name: "rmkeys"
      key: "redis"
    - env: "ConnectionStrings__Default"
      name: "rmkeys"
      key: "db"
    - env: "Keycloak__ClientSecret"
      name: "rmkeys"
      key: "usermansecret"
    - env: "Assets__ApiAccessKey"
      name: "rmkeys"
      key: "assetsapiaccesskey"
    - env: "Assets__StorageAccessKey"
      name: "rmkeys"
      key: "assetsstorageaccesskey"
    - env: "Archive__ApiAccessKey"
      name: "rmkeys"
      key: "archiveapiaccesskey"
    - env: "Archive__StorageAccessKey"
      name: "rmkeys"
      key: "archivestorageaccesskey"

# Redis Operator configuration
redis-operator:
  enabled: true

# Redis instance configuration (using Redis Operator)
redis:
  name: "redis"
  # Number of Redis replicas (master + replica)
  replicas: 2
  
  # Sentinel configuration for high availability
  sentinel:
    replicas: 3
    resources:
      requests:
        cpu: "100m"
        memory: "128Mi"
      limits:
        cpu: "200m"
        memory: "256Mi"
  
  # Redis resources
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "1000m"
      memory: "1Gi"
  
  # Authentication - uses existing secret
  auth:
    secretName: "rmkeys"
    secretKey: "redis"
  
  # Custom Redis configuration
  customConfig:
    - "maxmemory-policy allkeys-lru"
    - "appendonly no"