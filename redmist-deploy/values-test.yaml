# Test Environment Configuration
global:
  env:
    "ASPNETCORE_ENVIRONMENT": "Production"
    "ASPNETCORE_FORWARDEDHEADERS_ENABLED": "true"
    "ASPNETCORE_URLS": "http://+:8080"
    "REDIS_SVC": "redis-master:6379"
    "Keycloak__Realm": "redmist"
    "Keycloak__AuthServerUrl": "https://auth.redmist.racing"
    "SentinelApiUrl": "https://svs-api.sentinel.racing/api/"
    "Server__ExtTelemUrl": "https://api-test.redmist.racing/status/v1/ExternalTelemetry"
    "Assets__StorageZoneName": "redmist-assets-test"
    "Assets__MainReplicationRegion": "ny"
    "Assets__CdnId": "5008778"
    "Archive__StorageZoneName": "redmist-archive-test"
    "Archive__MainReplicationRegion": "ny"
    "Archive__CdnId": "5062899"

  secrets:
    - env: "REDIS_PW"
      name: "rmkeys-test"
      key: "redis"
    - env: "ConnectionStrings__Default"
      name: "rmkeys-test"
      key: "db"
    - env: "Keycloak__ClientSecret"
      name: "rmkeys-test"
      key: "usermansecret"
    - env: "Assets__ApiAccessKey"
      name: "rmkeys-test"
      key: "assetsapiaccesskey"
    - env: "Assets__StorageAccessKey"
      name: "rmkeys-test"
      key: "assetsstorageaccesskey"
    - env: "Archive__ApiAccessKey"
      name: "rmkeys-test"
      key: "archiveapiaccesskey"
    - env: "Archive__StorageAccessKey"
      name: "rmkeys-test"
      key: "archivestorageaccesskey"

# Override for all subcharts - disable TLS since Cloudflare handles it
redmist-status-api:
  environment: test
  ingress:
    tls: false
    annotations:
      nginx.ingress.kubernetes.io/ssl-redirect: "false"

redmist-relay-api:
  environment: test
  ingress:
    tls: false
    annotations:
      nginx.ingress.kubernetes.io/ssl-redirect: "false"

redmist-event-management:
  environment: test
  ingress:
    tls: false
    annotations:
      nginx.ingress.kubernetes.io/ssl-redirect: "false"

redmist-user-management:
  environment: test
  ingress:
    tls: false
    annotations:
      nginx.ingress.kubernetes.io/ssl-redirect: "false"

# Redis configuration for test
redis:
  fullnameOverride: "redis-test"
  auth:
    existingSecret: rmkeys-test
